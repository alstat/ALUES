<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Article 7: Visualizing with maps â€¢ ALUES</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Article 7: Visualizing with maps">
<meta property="og:description" content="ALUES">
<meta property="og:image" content="/logo.svg">
<meta property="og:image:alt" content="ALUES logo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ALUES</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ALUES.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_datasets.html">Article 1: ALUES datasets</a>
    </li>
    <li>
      <a href="../articles/a02_theory_of_suit.html">Article 2: Methodology used in ALUES</a>
    </li>
    <li>
      <a href="../articles/a03_understanding_suit.html">Article 3: Understanding the suit function</a>
    </li>
    <li>
      <a href="../articles/a04_understanding_overall_suit.html">Article 4: Understanding the overall_suit function</a>
    </li>
    <li>
      <a href="../articles/a05_custom_land_units_input.html">Article 5: Custom input land units</a>
    </li>
    <li>
      <a href="../articles/a06_custom_crop_input.html">Article 6: Custom crop requirements input</a>
    </li>
    <li>
      <a href="../articles/a07_visual_maps.html">Article 7: Visualizing with maps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/alstat/ALUES/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Article 7: Visualizing with maps</h1>
            
            <h4 data-toc-skip class="date">2022-06-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alstat/ALUES/blob/HEAD/vignettes/a07_visual_maps.Rmd" class="external-link"><code>vignettes/a07_visual_maps.Rmd</code></a></small>
      <div class="hidden name"><code>a07_visual_maps.Rmd</code></div>

    </div>

    
    
<p>While ALUES can generate tables for suitability scores and classes,
it can also take advantage of the rich mapping library of R. The main
requirement of course is the availability of the longitude and latitude
for each of the land units. This is possible for Marinduque as it has
spatial variables.</p>
<div class="section level2">
<h2 id="suitability-scores-and-classes">Suitability scores and classes<a class="anchor" aria-label="anchor" href="#suitability-scores-and-classes"></a>
</h2>
<p>Suppose we want to evaluate the land units for banana, then:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/alstat/ALUES/" class="external-link">ALUES</a></span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Loading required package: Rcpp</span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">MarinduqueLT</span>
<span class="va">banana_suit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/suit.html">suit</a></span><span class="op">(</span><span class="st">"banana"</span>, terrain<span class="op">=</span><span class="va">y</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in suitability(terrain, crop_soil, mf = mf, sow_month = NULL, minimum</span>
<span class="co">## = minimum, : maximum is set to 16 for factor CECc since all parameter intervals</span>
<span class="co">## are equal.</span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">banana_ovsuit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/overall_suit.html">overall_suit</a></span><span class="op">(</span><span class="va">banana_suit</span><span class="op">[[</span><span class="st">"soil"</span><span class="op">]</span><span class="op">]</span>, method<span class="op">=</span><span class="st">"average"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate-maps">Generate maps<a class="anchor" aria-label="anchor" href="#generate-maps"></a>
</h2>
<p>There are several ways to generate maps in R, but the following uses
ggmap library:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap" class="external-link">ggmap</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/reshape" class="external-link">reshape2</a></span><span class="op">)</span>
<span class="va">map_lvl0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="st">"GADM"</span>, country <span class="op">=</span> <span class="st">"PHL"</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="va">map_lvl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="st">"GADM"</span>, country <span class="op">=</span> <span class="st">"PHL"</span>, level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">prov</span> <span class="op">&lt;-</span> <span class="va">map_lvl2</span><span class="op">[</span><span class="va">map_lvl2</span><span class="op">$</span><span class="va">NAME_1</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="st">"Marinduque"</span><span class="op">)</span>,<span class="op">]</span>
<span class="va">munic_coord</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/xyFromCell.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">prov</span><span class="op">)</span>
<span class="va">munic_coord</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">munic_coord</span><span class="op">)</span>
<span class="va">munic_coord</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="va">prov</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">NAME_2</span>

<span class="va">val</span> <span class="op">&lt;-</span> <span class="va">banana_suit</span><span class="op">[[</span><span class="st">"soil"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>
<span class="va">val</span><span class="op">[</span><span class="st">"Overall Suitability"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">banana_ovsuit</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>
<span class="va">d_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html" class="external-link">melt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>
<span class="va">d_map</span><span class="op">$</span><span class="va">Lon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">Lon</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>; <span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">Lat</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>

<span class="va">fill</span> <span class="op">&lt;-</span> <span class="st">"#FFF7BC"</span>; <span class="va">shadow</span> <span class="op">&lt;-</span> <span class="st">"#9ECAE1"</span>; <span class="va">ncol</span> <span class="op">&lt;-</span> <span class="fl">3</span>; <span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">3</span>; <span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">text_opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span>, angle <span class="op">=</span> <span class="fl">0</span>, colour <span class="op">=</span> <span class="st">"black"</span>, family <span class="op">=</span> <span class="st">"sans"</span>, fontface <span class="op">=</span> <span class="fl">1</span>, lineheight <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">""</span>, xlab <span class="op">=</span> <span class="st">""</span>, ylab <span class="op">=</span> <span class="st">""</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span> <span class="op">+</span> <span class="fl">0.008</span>, <span class="va">lat</span> <span class="op">-</span> <span class="fl">0.005</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">shadow</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"grey50"</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Lat</span>, y <span class="op">=</span> <span class="va">Lon</span>, fill <span class="op">=</span> <span class="va">value</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">d_map</span>, size <span class="op">=</span> <span class="va">size</span>, alpha <span class="op">=</span> <span class="va">alpha</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">Var2</span>, ncol <span class="op">=</span> <span class="va">ncol</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"#4E4E4C"</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_label</span><span class="op">(</span>data <span class="op">=</span> <span class="va">munic_coord</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">X1</span>, y <span class="op">=</span> <span class="va">X2</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>,
            angle <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">angle</span>, colour <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"black"</span>, family <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">family</span>,
            fontface <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">fontface</span>,
            lineheight <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">lineheight</span>, size <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">size</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_equal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">xlab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">ylab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_fill_gradientn</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Score\n"</span>, colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"#FFDF00"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.05</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span><span class="op">)</span>, len <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#F7E7CE'</span><span class="op">)</span>, 
        strip.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#D4BF96"</span><span class="op">)</span>,
        strip.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, 
        legend.text<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,
        legend.title<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,
        axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span>
<span class="va">p1</span></code></pre></div>
<p><img src="../reference/figures/scores1.jpg" width="100%"> And for
suitability classes:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">val</span> <span class="op">&lt;-</span> <span class="va">banana_suit</span><span class="op">[[</span><span class="st">"soil"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>
<span class="va">val</span><span class="op">[</span><span class="st">"Overall Suitability"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">banana_ovsuit</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>
<span class="va">d_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html" class="external-link">melt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>
<span class="va">d_map</span><span class="op">$</span><span class="va">Lon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">Lon</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>; <span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">Lat</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>

<span class="va">d_map</span><span class="op">$</span><span class="va">Class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">d_map</span><span class="op">$</span><span class="va">value</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"S3"</span>, <span class="st">"S2"</span>, <span class="st">"S1"</span><span class="op">)</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span> <span class="op">+</span> <span class="fl">0.008</span>, <span class="va">lat</span> <span class="op">-</span> <span class="fl">0.005</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">shadow</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"grey50"</span>, fill <span class="op">=</span> <span class="va">fill</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Lat</span>, y <span class="op">=</span> <span class="va">Lon</span>, fill <span class="op">=</span> <span class="va">Class</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">d_map</span>, size <span class="op">=</span> <span class="va">size</span>, alpha <span class="op">=</span> <span class="va">alpha</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">Var2</span>, ncol <span class="op">=</span> <span class="va">ncol</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_polygon</span><span class="op">(</span>data <span class="op">=</span> <span class="va">prov</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"#4E4E4C"</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_label</span><span class="op">(</span>data <span class="op">=</span> <span class="va">munic_coord</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">X1</span>, y <span class="op">=</span> <span class="va">X2</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>,
             angle <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">angle</span>, colour <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"black"</span>, family <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">family</span>,
             fontface <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">fontface</span>,
             lineheight <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">lineheight</span>, size <span class="op">=</span> <span class="va">text_opts</span><span class="op">$</span><span class="va">size</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_equal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">xlab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">labels</span><span class="op">$</span><span class="va">ylab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_colour_discrete</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Class\n"</span>, breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"S3"</span>, <span class="st">"S2"</span>, <span class="st">"S1"</span><span class="op">)</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"S3"</span>, <span class="st">"S2"</span>, <span class="st">"S1"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.05</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">d_map</span><span class="op">$</span><span class="va">Lat</span><span class="op">)</span>, len <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#F7E7CE'</span><span class="op">)</span>, 
        strip.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#D4BF96"</span><span class="op">)</span>,
        strip.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, 
        legend.text<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,
        legend.title<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,
        axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span>
<span class="va">p1</span></code></pre></div>
<p><img src="../reference/figures/classes1.jpg" width="100%"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Al-Ahmadgaid B. Asaad, Arnold R. Salvacion, Bui Tan Yen.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
