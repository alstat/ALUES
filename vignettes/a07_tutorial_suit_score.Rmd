---
title: "Evaluating land units of Marinduque"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteEngine{knitr::knitr}
  %\VignetteIndexEntry{Evaluating land units of Marinduque}
  %\usepackage[UTF-8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Datasets
ALUES includes datasets for all crop requirements, for example `AVOCADOSoil` can be accessed directly in the R console once ALUES is loaded. For this illustration, the soil and terrain characteristics of the land units of Marinduque, Philippines are assessed for its suitability scores for farming banana. The head (first 6 rows) of the land units dataset can be displayed as follows:
```{r}
library(ALUES)
head(MarinduqueLT)
```
The above land units are evaluated for banana terrain and soil requirements given below:
```{r}
BANANATerrain
BANANASoil
```
## Suitability Scores and Classes
To compute the suitability scores of the land units of `MarinduqueLT`, the `suit` function is used. So that,
```{r}
bsuit <- suit("banana", terrain=MarinduqueLT)
```
The `suit` function takes as its first argument a string input for the name of the crop. It will then use this string input to find the target crop's datasets, in this case "banana", so the target crop's datasets are `BANANASoil`, `BANANATerrain`, `BANANAWater` and `BANANATemp`. The next argument is the `terrain` argument, which further targets a subset of datasets from the four crop's datasets, this time only the soil and terrain datasets. That is, the `BANANAWater` and `BANANATemp` are not used since only the terrain characteristics of the input land unit is provided. The warning output simply tells the user that the factor CECc have equal parameter class interval limits, and sets the constant max used for computing the suitability score to that interval limit. By default, the `suit` function uses a triangular membership function.

It should be understood, that if the user wanted to evaluate the land units not just for soil and terrain characteristics, but also for water and temperature, the arguments `water` and `temp` must be specified as follows:
```{r, eval=FALSE}
suit("banana", 
    terrain=MarinduqueLT, 
    water=MarinduqueWater,
    temp=MarinduqueTemp,
    sow_month=1
)
```
It is necessary though to specify the sowing month (the argument `sow_month`) when specifying the values for water and temperature characteristics. This is to determine the corresponding month of the factors defined in the crop's parameters for the said characteristics.

Going back to the example, the output of `bsuit` variable is an R list, the names of which can be accessed as follows:
```{r}
names(bsuit)
```
The names of the output here simply tells the user that there were two characteristics evaluated, namely the terrain and soil characteristics. Each of these characteristics has corresponding output for suitability score, class, factors evaluated, etc. For example, one can check the names of the output for each characteristics as illustrated below.
```{r}
names(bsuit[["soil"]])
```
So that the suitability scores of the soil characteristics of the first 6 land units in Marinduque, Philippines, for farming banana, is extracted as follows:
```{r}
head(bsuit[["soil"]][["Suitability Score"]])
```
The corresponding classes are extracted as follows:
```{r}
head(bsuit[["soil"]][["Suitability Class"]])
```
Note that, for terrain characteristics one must simply replace the `"soil"` to `"terrain"` in the above code. Further, it should be emphasized that, there is no suitability score for terrain characteristics since no factors given in `MarinduqueLT` matched with the factors of the land units collected in `BANANATerrain`. That is, the input land units did not target the terrain characteristics, rather only the soil characteristics. This can be confirmed in ALUES, by accessing the output of the terrain characteristics as in the codes below.
```{r}
bsuit[["terrain"]]
```
The face of the MF for the factor CECc, where the parameter interval limits are all equal, is automatically set by ALUES to left or lower face. In terms of the suitability classes, the class intervals for CECc are as follows: [0, 1) for N, and \{1\} for S1, that is only scores exactly to 1 will have suitability class of S1. This is expected, since the parameter interval limits for CECc are all equal including the constant max. 
### Overall Suitability
Finally, the overall suitability scores are computed as follows:
```{r}
ovsuit <- overall_suit(bsuit[["soil"]], 
    method="average"
)
```
Again, there is no output for terrain characteristics as discussed earlier. Hence, the following overall suitability is only for soil characteristics of the first 6 input land units of Marinduque, Philippines.
```{r}
head(ovsuit)
```